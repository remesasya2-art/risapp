{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":39,"index":172}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":173},"end":{"line":5,"column":69,"index":242}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":243},"end":{"line":6,"column":26,"index":269}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.sendPushTokenToServer = sendPushTokenToServer;\n  exports.addNotificationReceivedListener = addNotificationReceivedListener;\n  exports.addNotificationResponseReceivedListener = addNotificationResponseReceivedListener;\n  exports.scheduleLocalNotification = scheduleLocalNotification;\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[1], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[5], \"axios\");\n  var axios = _interopDefault(_axios);\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n\n  // Configure notification behavior\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n\n    // Push notifications only work on physical devices\n    if (!Device.isDevice) {\n      console.log('Push notifications require a physical device');\n      return null;\n    }\n\n    // Check if we're on a supported platform\n    if (Platform.default.OS === 'android') {\n      // Set notification channel for Android\n      await Notifications.setNotificationChannelAsync('withdrawals', {\n        name: 'Retiros',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#4CAF50'\n      });\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'Default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#2563eb'\n      });\n    }\n\n    // Request permission\n    const {\n      status: existingStatus\n    } = await Notifications.getPermissionsAsync();\n    let finalStatus = existingStatus;\n    if (existingStatus !== 'granted') {\n      const {\n        status\n      } = await Notifications.requestPermissionsAsync();\n      finalStatus = status;\n    }\n    if (finalStatus !== 'granted') {\n      console.log('Push notification permission not granted');\n      return null;\n    }\n    try {\n      // Get the Expo push token (works with Expo Go)\n      const expoPushToken = await Notifications.getExpoPushTokenAsync({\n        projectId: Constants.default.expoConfig?.extra?.eas?.projectId\n      });\n      token = expoPushToken.data;\n      console.log('Expo Push Token:', token);\n    } catch (error) {\n      console.log('Error getting Expo push token:', error);\n\n      // Try to get FCM token for production builds\n      try {\n        const fcmToken = await Notifications.getDevicePushTokenAsync();\n        token = fcmToken.data;\n        console.log('Device Push Token:', token);\n      } catch (fcmError) {\n        console.log('Error getting device push token:', fcmError);\n      }\n    }\n    return token;\n  }\n  async function sendPushTokenToServer(token) {\n    try {\n      const sessionToken = await AsyncStorage.default.getItem('session_token');\n      if (!sessionToken) {\n        console.log('No session token, cannot register FCM token');\n        return false;\n      }\n      await axios.default.post(`${BACKEND_URL}/api/auth/register-fcm-token`, {\n        fcm_token: token\n      }, {\n        headers: {\n          Authorization: `Bearer ${sessionToken}`\n        }\n      });\n      console.log('FCM token registered with server');\n      return true;\n    } catch (error) {\n      console.error('Error sending push token to server:', error);\n      return false;\n    }\n  }\n  function addNotificationReceivedListener(callback) {\n    return Notifications.addNotificationReceivedListener(callback);\n  }\n  function addNotificationResponseReceivedListener(callback) {\n    return Notifications.addNotificationResponseReceivedListener(callback);\n  }\n  async function scheduleLocalNotification(title, body, data) {\n    await Notifications.scheduleNotificationAsync({\n      content: {\n        title,\n        body,\n        data,\n        sound: true\n      },\n      trigger: null // Immediately\n    });\n  }\n});","lineCount":154,"map":[[27,2,19,0,"exports"],[27,9,19,0],[27,10,19,0,"registerForPushNotificationsAsync"],[27,43,19,0],[27,46,19,0,"registerForPushNotificationsAsync"],[27,79,19,0],[28,2,83,0,"exports"],[28,9,83,0],[28,10,83,0,"sendPushTokenToServer"],[28,31,83,0],[28,34,83,0,"sendPushTokenToServer"],[28,55,83,0],[29,2,105,0,"exports"],[29,9,105,0],[29,10,105,0,"addNotificationReceivedListener"],[29,41,105,0],[29,44,105,0,"addNotificationReceivedListener"],[29,75,105,0],[30,2,111,0,"exports"],[30,9,111,0],[30,10,111,0,"addNotificationResponseReceivedListener"],[30,49,111,0],[30,52,111,0,"addNotificationResponseReceivedListener"],[30,91,111,0],[31,2,117,0,"exports"],[31,9,117,0],[31,10,117,0,"scheduleLocalNotification"],[31,35,117,0],[31,38,117,0,"scheduleLocalNotification"],[31,63,117,0],[32,2,1,0],[32,6,1,0,"_expoNotifications"],[32,24,1,0],[32,27,1,0,"require"],[32,34,1,0],[32,35,1,0,"_dependencyMap"],[32,49,1,0],[33,2,1,0],[33,6,1,0,"Notifications"],[33,19,1,0],[33,22,1,0,"_interopNamespace"],[33,39,1,0],[33,40,1,0,"_expoNotifications"],[33,58,1,0],[34,2,2,0],[34,6,2,0,"_expoDevice"],[34,17,2,0],[34,20,2,0,"require"],[34,27,2,0],[34,28,2,0,"_dependencyMap"],[34,42,2,0],[35,2,2,0],[35,6,2,0,"Device"],[35,12,2,0],[35,15,2,0,"_interopNamespace"],[35,32,2,0],[35,33,2,0,"_expoDevice"],[35,44,2,0],[36,2,2,38],[36,6,2,38,"_reactNativeWebDistExportsPlatform"],[36,40,2,38],[36,43,2,38,"require"],[36,50,2,38],[36,51,2,38,"_dependencyMap"],[36,65,2,38],[37,2,2,38],[37,6,2,38,"Platform"],[37,14,2,38],[37,17,2,38,"_interopDefault"],[37,32,2,38],[37,33,2,38,"_reactNativeWebDistExportsPlatform"],[37,67,2,38],[38,2,4,0],[38,6,4,0,"_expoConstants"],[38,20,4,0],[38,23,4,0,"require"],[38,30,4,0],[38,31,4,0,"_dependencyMap"],[38,45,4,0],[39,2,4,0],[39,6,4,0,"Constants"],[39,15,4,0],[39,18,4,0,"_interopDefault"],[39,33,4,0],[39,34,4,0,"_expoConstants"],[39,48,4,0],[40,2,5,0],[40,6,5,0,"_reactNativeAsyncStorageAsyncStorage"],[40,42,5,0],[40,45,5,0,"require"],[40,52,5,0],[40,53,5,0,"_dependencyMap"],[40,67,5,0],[41,2,5,0],[41,6,5,0,"AsyncStorage"],[41,18,5,0],[41,21,5,0,"_interopDefault"],[41,36,5,0],[41,37,5,0,"_reactNativeAsyncStorageAsyncStorage"],[41,73,5,0],[42,2,6,0],[42,6,6,0,"_axios"],[42,12,6,0],[42,15,6,0,"require"],[42,22,6,0],[42,23,6,0,"_dependencyMap"],[42,37,6,0],[43,2,6,0],[43,6,6,0,"axios"],[43,11,6,0],[43,14,6,0,"_interopDefault"],[43,29,6,0],[43,30,6,0,"_axios"],[43,36,6,0],[44,2,8,0],[44,8,8,6,"BACKEND_URL"],[44,19,8,17],[44,22,8,20,"process"],[44,29,8,27],[44,30,8,28,"env"],[44,33,8,31],[44,34,8,32,"EXPO_PUBLIC_BACKEND_URL"],[44,57,8,55],[44,61,8,59],[44,63,8,61],[46,2,10,0],[47,2,11,0,"Notifications"],[47,15,11,13],[47,16,11,14,"setNotificationHandler"],[47,38,11,36],[47,39,11,37],[48,4,12,2,"handleNotification"],[48,22,12,20],[48,24,12,22],[48,30,12,22,"handleNotification"],[48,31,12,22],[48,37,12,35],[49,6,13,4,"shouldShowAlert"],[49,21,13,19],[49,23,13,21],[49,27,13,25],[50,6,14,4,"shouldPlaySound"],[50,21,14,19],[50,23,14,21],[50,27,14,25],[51,6,15,4,"shouldSetBadge"],[51,20,15,18],[51,22,15,20],[52,4,16,2],[52,5,16,3],[53,2,17,0],[53,3,17,1],[53,4,17,2],[54,2,19,7],[54,17,19,22,"registerForPushNotificationsAsync"],[54,50,19,55,"registerForPushNotificationsAsync"],[54,51,19,55],[54,53,19,82],[55,4,20,2],[55,8,20,6,"token"],[55,13,20,26],[55,16,20,29],[55,20,20,33],[57,4,22,2],[58,4,23,2],[58,8,23,6],[58,9,23,7,"Device"],[58,15,23,13],[58,16,23,14,"isDevice"],[58,24,23,22],[58,26,23,24],[59,6,24,4,"console"],[59,13,24,11],[59,14,24,12,"log"],[59,17,24,15],[59,18,24,16],[59,64,24,62],[59,65,24,63],[60,6,25,4],[60,13,25,11],[60,17,25,15],[61,4,26,2],[63,4,28,2],[64,4,29,2],[64,8,29,6,"Platform"],[64,16,29,14],[64,17,29,14,"default"],[64,24,29,14],[64,25,29,15,"OS"],[64,27,29,17],[64,32,29,22],[64,41,29,31],[64,43,29,33],[65,6,30,4],[66,6,31,4],[66,12,31,10,"Notifications"],[66,25,31,23],[66,26,31,24,"setNotificationChannelAsync"],[66,53,31,51],[66,54,31,52],[66,67,31,65],[66,69,31,67],[67,8,32,6,"name"],[67,12,32,10],[67,14,32,12],[67,23,32,21],[68,8,33,6,"importance"],[68,18,33,16],[68,20,33,18,"Notifications"],[68,33,33,31],[68,34,33,32,"AndroidImportance"],[68,51,33,49],[68,52,33,50,"MAX"],[68,55,33,53],[69,8,34,6,"vibrationPattern"],[69,24,34,22],[69,26,34,24],[69,27,34,25],[69,28,34,26],[69,30,34,28],[69,33,34,31],[69,35,34,33],[69,38,34,36],[69,40,34,38],[69,43,34,41],[69,44,34,42],[70,8,35,6,"lightColor"],[70,18,35,16],[70,20,35,18],[71,6,36,4],[71,7,36,5],[71,8,36,6],[72,6,38,4],[72,12,38,10,"Notifications"],[72,25,38,23],[72,26,38,24,"setNotificationChannelAsync"],[72,53,38,51],[72,54,38,52],[72,63,38,61],[72,65,38,63],[73,8,39,6,"name"],[73,12,39,10],[73,14,39,12],[73,23,39,21],[74,8,40,6,"importance"],[74,18,40,16],[74,20,40,18,"Notifications"],[74,33,40,31],[74,34,40,32,"AndroidImportance"],[74,51,40,49],[74,52,40,50,"MAX"],[74,55,40,53],[75,8,41,6,"vibrationPattern"],[75,24,41,22],[75,26,41,24],[75,27,41,25],[75,28,41,26],[75,30,41,28],[75,33,41,31],[75,35,41,33],[75,38,41,36],[75,40,41,38],[75,43,41,41],[75,44,41,42],[76,8,42,6,"lightColor"],[76,18,42,16],[76,20,42,18],[77,6,43,4],[77,7,43,5],[77,8,43,6],[78,4,44,2],[80,4,46,2],[81,4,47,2],[81,10,47,8],[82,6,47,10,"status"],[82,12,47,16],[82,14,47,18,"existingStatus"],[83,4,47,33],[83,5,47,34],[83,8,47,37],[83,14,47,43,"Notifications"],[83,27,47,56],[83,28,47,57,"getPermissionsAsync"],[83,47,47,76],[83,48,47,77],[83,49,47,78],[84,4,48,2],[84,8,48,6,"finalStatus"],[84,19,48,17],[84,22,48,20,"existingStatus"],[84,36,48,34],[85,4,50,2],[85,8,50,6,"existingStatus"],[85,22,50,20],[85,27,50,25],[85,36,50,34],[85,38,50,36],[86,6,51,4],[86,12,51,10],[87,8,51,12,"status"],[88,6,51,19],[88,7,51,20],[88,10,51,23],[88,16,51,29,"Notifications"],[88,29,51,42],[88,30,51,43,"requestPermissionsAsync"],[88,53,51,66],[88,54,51,67],[88,55,51,68],[89,6,52,4,"finalStatus"],[89,17,52,15],[89,20,52,18,"status"],[89,26,52,24],[90,4,53,2],[91,4,55,2],[91,8,55,6,"finalStatus"],[91,19,55,17],[91,24,55,22],[91,33,55,31],[91,35,55,33],[92,6,56,4,"console"],[92,13,56,11],[92,14,56,12,"log"],[92,17,56,15],[92,18,56,16],[92,60,56,58],[92,61,56,59],[93,6,57,4],[93,13,57,11],[93,17,57,15],[94,4,58,2],[95,4,60,2],[95,8,60,6],[96,6,61,4],[97,6,62,4],[97,12,62,10,"expoPushToken"],[97,25,62,23],[97,28,62,26],[97,34,62,32,"Notifications"],[97,47,62,45],[97,48,62,46,"getExpoPushTokenAsync"],[97,69,62,67],[97,70,62,68],[98,8,63,6,"projectId"],[98,17,63,15],[98,19,63,17,"Constants"],[98,28,63,26],[98,29,63,26,"default"],[98,36,63,26],[98,37,63,27,"expoConfig"],[98,47,63,37],[98,49,63,39,"extra"],[98,54,63,44],[98,56,63,46,"eas"],[98,59,63,49],[98,61,63,51,"projectId"],[99,6,64,4],[99,7,64,5],[99,8,64,6],[100,6,65,4,"token"],[100,11,65,9],[100,14,65,12,"expoPushToken"],[100,27,65,25],[100,28,65,26,"data"],[100,32,65,30],[101,6,66,4,"console"],[101,13,66,11],[101,14,66,12,"log"],[101,17,66,15],[101,18,66,16],[101,36,66,34],[101,38,66,36,"token"],[101,43,66,41],[101,44,66,42],[102,4,67,2],[102,5,67,3],[102,6,67,4],[102,13,67,11,"error"],[102,18,67,16],[102,20,67,18],[103,6,68,4,"console"],[103,13,68,11],[103,14,68,12,"log"],[103,17,68,15],[103,18,68,16],[103,50,68,48],[103,52,68,50,"error"],[103,57,68,55],[103,58,68,56],[105,6,70,4],[106,6,71,4],[106,10,71,8],[107,8,72,6],[107,14,72,12,"fcmToken"],[107,22,72,20],[107,25,72,23],[107,31,72,29,"Notifications"],[107,44,72,42],[107,45,72,43,"getDevicePushTokenAsync"],[107,68,72,66],[107,69,72,67],[107,70,72,68],[108,8,73,6,"token"],[108,13,73,11],[108,16,73,14,"fcmToken"],[108,24,73,22],[108,25,73,23,"data"],[108,29,73,27],[109,8,74,6,"console"],[109,15,74,13],[109,16,74,14,"log"],[109,19,74,17],[109,20,74,18],[109,40,74,38],[109,42,74,40,"token"],[109,47,74,45],[109,48,74,46],[110,6,75,4],[110,7,75,5],[110,8,75,6],[110,15,75,13,"fcmError"],[110,23,75,21],[110,25,75,23],[111,8,76,6,"console"],[111,15,76,13],[111,16,76,14,"log"],[111,19,76,17],[111,20,76,18],[111,54,76,52],[111,56,76,54,"fcmError"],[111,64,76,62],[111,65,76,63],[112,6,77,4],[113,4,78,2],[114,4,80,2],[114,11,80,9,"token"],[114,16,80,14],[115,2,81,0],[116,2,83,7],[116,17,83,22,"sendPushTokenToServer"],[116,38,83,43,"sendPushTokenToServer"],[116,39,83,44,"token"],[116,44,83,57],[116,46,83,77],[117,4,84,2],[117,8,84,6],[118,6,85,4],[118,12,85,10,"sessionToken"],[118,24,85,22],[118,27,85,25],[118,33,85,31,"AsyncStorage"],[118,45,85,43],[118,46,85,43,"default"],[118,53,85,43],[118,54,85,44,"getItem"],[118,61,85,51],[118,62,85,52],[118,77,85,67],[118,78,85,68],[119,6,86,4],[119,10,86,8],[119,11,86,9,"sessionToken"],[119,23,86,21],[119,25,86,23],[120,8,87,6,"console"],[120,15,87,13],[120,16,87,14,"log"],[120,19,87,17],[120,20,87,18],[120,65,87,63],[120,66,87,64],[121,8,88,6],[121,15,88,13],[121,20,88,18],[122,6,89,4],[123,6,91,4],[123,12,91,10,"axios"],[123,17,91,15],[123,18,91,15,"default"],[123,25,91,15],[123,26,91,16,"post"],[123,30,91,20],[123,31,92,6],[123,34,92,9,"BACKEND_URL"],[123,45,92,20],[123,75,92,50],[123,77,93,6],[124,8,93,8,"fcm_token"],[124,17,93,17],[124,19,93,19,"token"],[125,6,93,25],[125,7,93,26],[125,9,94,6],[126,8,94,8,"headers"],[126,15,94,15],[126,17,94,17],[127,10,94,19,"Authorization"],[127,23,94,32],[127,25,94,34],[127,35,94,44,"sessionToken"],[127,47,94,56],[128,8,94,59],[129,6,94,61],[129,7,95,4],[129,8,95,5],[130,6,97,4,"console"],[130,13,97,11],[130,14,97,12,"log"],[130,17,97,15],[130,18,97,16],[130,52,97,50],[130,53,97,51],[131,6,98,4],[131,13,98,11],[131,17,98,15],[132,4,99,2],[132,5,99,3],[132,6,99,4],[132,13,99,11,"error"],[132,18,99,16],[132,20,99,18],[133,6,100,4,"console"],[133,13,100,11],[133,14,100,12,"error"],[133,19,100,17],[133,20,100,18],[133,57,100,55],[133,59,100,57,"error"],[133,64,100,62],[133,65,100,63],[134,6,101,4],[134,13,101,11],[134,18,101,16],[135,4,102,2],[136,2,103,0],[137,2,105,7],[137,11,105,16,"addNotificationReceivedListener"],[137,42,105,47,"addNotificationReceivedListener"],[137,43,106,2,"callback"],[137,51,106,62],[137,53,107,2],[138,4,108,2],[138,11,108,9,"Notifications"],[138,24,108,22],[138,25,108,23,"addNotificationReceivedListener"],[138,56,108,54],[138,57,108,55,"callback"],[138,65,108,63],[138,66,108,64],[139,2,109,0],[140,2,111,7],[140,11,111,16,"addNotificationResponseReceivedListener"],[140,50,111,55,"addNotificationResponseReceivedListener"],[140,51,112,2,"callback"],[140,59,112,66],[140,61,113,2],[141,4,114,2],[141,11,114,9,"Notifications"],[141,24,114,22],[141,25,114,23,"addNotificationResponseReceivedListener"],[141,64,114,62],[141,65,114,63,"callback"],[141,73,114,71],[141,74,114,72],[142,2,115,0],[143,2,117,7],[143,17,117,22,"scheduleLocalNotification"],[143,42,117,47,"scheduleLocalNotification"],[143,43,118,2,"title"],[143,48,118,15],[143,50,119,2,"body"],[143,54,119,14],[143,56,120,2,"data"],[143,60,120,32],[143,62,121,2],[144,4,122,2],[144,10,122,8,"Notifications"],[144,23,122,21],[144,24,122,22,"scheduleNotificationAsync"],[144,49,122,47],[144,50,122,48],[145,6,123,4,"content"],[145,13,123,11],[145,15,123,13],[146,8,124,6,"title"],[146,13,124,11],[147,8,125,6,"body"],[147,12,125,10],[148,8,126,6,"data"],[148,12,126,10],[149,8,127,6,"sound"],[149,13,127,11],[149,15,127,13],[150,6,128,4],[150,7,128,5],[151,6,129,4,"trigger"],[151,13,129,11],[151,15,129,13],[151,19,129,17],[151,20,129,19],[152,4,130,2],[152,5,130,3],[152,6,130,4],[153,2,131,0],[154,0,131,1],[154,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","sendPushTokenToServer","addNotificationReceivedListener","addNotificationResponseReceivedListener","scheduleLocalNotification"],"mappings":"AAA;sBCW;IDI;OEG;CF8D;OGE;CHoB;OIE;CJI;OKE;CLI;OME;CNc"},"hasCjsExports":false},"type":"js/module"}]}