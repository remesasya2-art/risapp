{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":102,"index":102}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":103},"end":{"line":2,"column":26,"index":129}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/RateContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useRate\", {\n    enumerable: true,\n    get: function () {\n      return useRate;\n    }\n  });\n  Object.defineProperty(exports, \"RateProvider\", {\n    enumerable: true,\n    get: function () {\n      return RateProvider;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const defaultRates = {\n    ris_to_ves: 100,\n    ves_to_ris: 120,\n    ris_to_brl: 1,\n    updated_at: '',\n    updated_by: ''\n  };\n  const RateContext = /*#__PURE__*/(0, _react.createContext)({\n    rates: defaultRates,\n    loading: true,\n    error: null,\n    refreshRate: async () => {},\n    lastUpdate: null\n  });\n  const useRate = () => (0, _react.useContext)(RateContext);\n  const RateProvider = ({\n    children\n  }) => {\n    const [rates, setRates] = (0, _react.useState)(defaultRates);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [error, setError] = (0, _react.useState)(null);\n    const [lastUpdate, setLastUpdate] = (0, _react.useState)(null);\n    const fetchRate = (0, _react.useCallback)(async () => {\n      try {\n        console.log('[RateContext] Fetching rate from:', `${BACKEND_URL}/api/rate`);\n        const response = await axios.default.get(`${BACKEND_URL}/api/rate`);\n        const newRates = {\n          ris_to_ves: response.data.ris_to_ves || 100,\n          ves_to_ris: response.data.ves_to_ris || 120,\n          ris_to_brl: response.data.ris_to_brl || 1,\n          updated_at: response.data.updated_at || '',\n          updated_by: response.data.updated_by || ''\n        };\n        console.log('[RateContext] Rate updated:', newRates);\n        setRates(newRates);\n        setLastUpdate(new Date());\n        setError(null);\n      } catch (err) {\n        console.error('[RateContext] Error fetching rate:', err);\n        setError('Error al cargar la tasa');\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n\n    // Initial fetch\n    (0, _react.useEffect)(() => {\n      fetchRate();\n    }, [fetchRate]);\n\n    // Auto-refresh every 10 seconds for real-time updates\n    (0, _react.useEffect)(() => {\n      const interval = setInterval(() => {\n        fetchRate();\n      }, 10000); // 10 seconds for near real-time\n\n      return () => clearInterval(interval);\n    }, [fetchRate]);\n    const refreshRate = (0, _react.useCallback)(async () => {\n      setLoading(true);\n      await fetchRate();\n    }, [fetchRate]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(RateContext.Provider, {\n      value: {\n        rates,\n        loading,\n        error,\n        refreshRate,\n        lastUpdate\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }, this);\n  };\n  var _default = RateContext;\n});","lineCount":114,"map":[[13,2,101,0,"Object"],[13,8,101,0],[13,9,101,0,"defineProperty"],[13,23,101,0],[13,24,101,0,"exports"],[13,31,101,0],[14,4,101,0,"enumerable"],[14,14,101,0],[15,4,101,0,"get"],[15,7,101,0],[15,18,101,0,"get"],[15,19,101,0],[16,6,101,0],[16,13,101,0,"_default"],[16,21,101,0],[17,4,101,0],[18,2,101,0],[19,2,38,0,"Object"],[19,8,38,0],[19,9,38,0,"defineProperty"],[19,23,38,0],[19,24,38,0,"exports"],[19,31,38,0],[20,4,38,0,"enumerable"],[20,14,38,0],[21,4,38,0,"get"],[21,7,38,0],[21,18,38,0,"get"],[21,19,38,0],[22,6,38,0],[22,13,38,0,"useRate"],[22,20,38,0],[23,4,38,0],[24,2,38,0],[25,2,44,0,"Object"],[25,8,44,0],[25,9,44,0,"defineProperty"],[25,23,44,0],[25,24,44,0,"exports"],[25,31,44,0],[26,4,44,0,"enumerable"],[26,14,44,0],[27,4,44,0,"get"],[27,7,44,0],[27,18,44,0,"get"],[27,19,44,0],[28,6,44,0],[28,13,44,0,"RateProvider"],[28,25,44,0],[29,4,44,0],[30,2,44,0],[31,2,1,0],[31,6,1,0,"_react"],[31,12,1,0],[31,15,1,0,"require"],[31,22,1,0],[31,23,1,0,"_dependencyMap"],[31,37,1,0],[32,2,2,0],[32,6,2,0,"_axios"],[32,12,2,0],[32,15,2,0,"require"],[32,22,2,0],[32,23,2,0,"_dependencyMap"],[32,37,2,0],[33,2,2,0],[33,6,2,0,"axios"],[33,11,2,0],[33,14,2,0,"_interopDefault"],[33,29,2,0],[33,30,2,0,"_axios"],[33,36,2,0],[34,2,2,26],[34,6,2,26,"_reactJsxDevRuntime"],[34,25,2,26],[34,28,2,26,"require"],[34,35,2,26],[34,36,2,26,"_dependencyMap"],[34,50,2,26],[35,2,4,0],[35,8,4,6,"BACKEND_URL"],[35,19,4,17],[35,22,4,20,"process"],[35,29,4,27],[35,30,4,28,"env"],[35,33,4,31],[35,34,4,32,"EXPO_PUBLIC_BACKEND_URL"],[35,57,4,55],[35,61,4,59],[35,63,4,61],[36,2,22,0],[36,8,22,6,"defaultRates"],[36,20,22,28],[36,23,22,31],[37,4,23,2,"ris_to_ves"],[37,14,23,12],[37,16,23,14],[37,19,23,17],[38,4,24,2,"ves_to_ris"],[38,14,24,12],[38,16,24,14],[38,19,24,17],[39,4,25,2,"ris_to_brl"],[39,14,25,12],[39,16,25,14],[39,17,25,15],[40,4,26,2,"updated_at"],[40,14,26,12],[40,16,26,14],[40,18,26,16],[41,4,27,2,"updated_by"],[41,14,27,12],[41,16,27,14],[42,2,28,0],[42,3,28,1],[43,2,30,0],[43,8,30,6,"RateContext"],[43,19,30,17],[43,35,30,20],[43,39,30,20,"createContext"],[43,45,30,33],[43,46,30,33,"createContext"],[43,59,30,33],[43,61,30,51],[44,4,31,2,"rates"],[44,9,31,7],[44,11,31,9,"defaultRates"],[44,23,31,21],[45,4,32,2,"loading"],[45,11,32,9],[45,13,32,11],[45,17,32,15],[46,4,33,2,"error"],[46,9,33,7],[46,11,33,9],[46,15,33,13],[47,4,34,2,"refreshRate"],[47,15,34,13],[47,17,34,15],[47,23,34,15,"refreshRate"],[47,24,34,15],[47,29,34,27],[47,30,34,28],[47,31,34,29],[48,4,35,2,"lastUpdate"],[48,14,35,12],[48,16,35,14],[49,2,36,0],[49,3,36,1],[49,4,36,2],[50,2,38,7],[50,8,38,13,"useRate"],[50,15,38,20],[50,18,38,23,"useRate"],[50,19,38,23],[50,24,38,29],[50,28,38,29,"useContext"],[50,34,38,39],[50,35,38,39,"useContext"],[50,45,38,39],[50,47,38,40,"RateContext"],[50,58,38,51],[50,59,38,52],[51,2,44,7],[51,8,44,13,"RateProvider"],[51,20,44,54],[51,23,44,57,"RateProvider"],[51,24,44,58],[52,4,44,60,"children"],[53,2,44,69],[53,3,44,70],[53,8,44,75],[54,4,45,2],[54,10,45,8],[54,11,45,9,"rates"],[54,16,45,14],[54,18,45,16,"setRates"],[54,26,45,24],[54,27,45,25],[54,30,45,28],[54,34,45,28,"useState"],[54,40,45,36],[54,41,45,36,"useState"],[54,49,45,36],[54,51,45,47,"defaultRates"],[54,63,45,59],[54,64,45,60],[55,4,46,2],[55,10,46,8],[55,11,46,9,"loading"],[55,18,46,16],[55,20,46,18,"setLoading"],[55,30,46,28],[55,31,46,29],[55,34,46,32],[55,38,46,32,"useState"],[55,44,46,40],[55,45,46,40,"useState"],[55,53,46,40],[55,55,46,41],[55,59,46,45],[55,60,46,46],[56,4,47,2],[56,10,47,8],[56,11,47,9,"error"],[56,16,47,14],[56,18,47,16,"setError"],[56,26,47,24],[56,27,47,25],[56,30,47,28],[56,34,47,28,"useState"],[56,40,47,36],[56,41,47,36,"useState"],[56,49,47,36],[56,51,47,52],[56,55,47,56],[56,56,47,57],[57,4,48,2],[57,10,48,8],[57,11,48,9,"lastUpdate"],[57,21,48,19],[57,23,48,21,"setLastUpdate"],[57,36,48,34],[57,37,48,35],[57,40,48,38],[57,44,48,38,"useState"],[57,50,48,46],[57,51,48,46,"useState"],[57,59,48,46],[57,61,48,60],[57,65,48,64],[57,66,48,65],[58,4,50,2],[58,10,50,8,"fetchRate"],[58,19,50,17],[58,22,50,20],[58,26,50,20,"useCallback"],[58,32,50,31],[58,33,50,31,"useCallback"],[58,44,50,31],[58,46,50,32],[58,58,50,44],[59,6,51,4],[59,10,51,8],[60,8,52,6,"console"],[60,15,52,13],[60,16,52,14,"log"],[60,19,52,17],[60,20,52,18],[60,55,52,53],[60,57,52,55],[60,60,52,58,"BACKEND_URL"],[60,71,52,69],[60,82,52,80],[60,83,52,81],[61,8,53,6],[61,14,53,12,"response"],[61,22,53,20],[61,25,53,23],[61,31,53,29,"axios"],[61,36,53,34],[61,37,53,34,"default"],[61,44,53,34],[61,45,53,35,"get"],[61,48,53,38],[61,49,53,39],[61,52,53,42,"BACKEND_URL"],[61,63,53,53],[61,74,53,64],[61,75,53,65],[62,8,55,6],[62,14,55,12,"newRates"],[62,22,55,30],[62,25,55,33],[63,10,56,8,"ris_to_ves"],[63,20,56,18],[63,22,56,20,"response"],[63,30,56,28],[63,31,56,29,"data"],[63,35,56,33],[63,36,56,34,"ris_to_ves"],[63,46,56,44],[63,50,56,48],[63,53,56,51],[64,10,57,8,"ves_to_ris"],[64,20,57,18],[64,22,57,20,"response"],[64,30,57,28],[64,31,57,29,"data"],[64,35,57,33],[64,36,57,34,"ves_to_ris"],[64,46,57,44],[64,50,57,48],[64,53,57,51],[65,10,58,8,"ris_to_brl"],[65,20,58,18],[65,22,58,20,"response"],[65,30,58,28],[65,31,58,29,"data"],[65,35,58,33],[65,36,58,34,"ris_to_brl"],[65,46,58,44],[65,50,58,48],[65,51,58,49],[66,10,59,8,"updated_at"],[66,20,59,18],[66,22,59,20,"response"],[66,30,59,28],[66,31,59,29,"data"],[66,35,59,33],[66,36,59,34,"updated_at"],[66,46,59,44],[66,50,59,48],[66,52,59,50],[67,10,60,8,"updated_by"],[67,20,60,18],[67,22,60,20,"response"],[67,30,60,28],[67,31,60,29,"data"],[67,35,60,33],[67,36,60,34,"updated_by"],[67,46,60,44],[67,50,60,48],[68,8,61,6],[68,9,61,7],[69,8,63,6,"console"],[69,15,63,13],[69,16,63,14,"log"],[69,19,63,17],[69,20,63,18],[69,49,63,47],[69,51,63,49,"newRates"],[69,59,63,57],[69,60,63,58],[70,8,64,6,"setRates"],[70,16,64,14],[70,17,64,15,"newRates"],[70,25,64,23],[70,26,64,24],[71,8,65,6,"setLastUpdate"],[71,21,65,19],[71,22,65,20],[71,26,65,24,"Date"],[71,30,65,28],[71,31,65,29],[71,32,65,30],[71,33,65,31],[72,8,66,6,"setError"],[72,16,66,14],[72,17,66,15],[72,21,66,19],[72,22,66,20],[73,6,67,4],[73,7,67,5],[73,8,67,6],[73,15,67,13,"err"],[73,18,67,16],[73,20,67,18],[74,8,68,6,"console"],[74,15,68,13],[74,16,68,14,"error"],[74,21,68,19],[74,22,68,20],[74,58,68,56],[74,60,68,58,"err"],[74,63,68,61],[74,64,68,62],[75,8,69,6,"setError"],[75,16,69,14],[75,17,69,15],[75,42,69,40],[75,43,69,41],[76,6,70,4],[76,7,70,5],[76,16,70,14],[77,8,71,6,"setLoading"],[77,18,71,16],[77,19,71,17],[77,24,71,22],[77,25,71,23],[78,6,72,4],[79,4,73,2],[79,5,73,3],[79,7,73,5],[79,9,73,7],[79,10,73,8],[81,4,75,2],[82,4,76,2],[82,8,76,2,"useEffect"],[82,14,76,11],[82,15,76,11,"useEffect"],[82,24,76,11],[82,26,76,12],[82,32,76,18],[83,6,77,4,"fetchRate"],[83,15,77,13],[83,16,77,14],[83,17,77,15],[84,4,78,2],[84,5,78,3],[84,7,78,5],[84,8,78,6,"fetchRate"],[84,17,78,15],[84,18,78,16],[84,19,78,17],[86,4,80,2],[87,4,81,2],[87,8,81,2,"useEffect"],[87,14,81,11],[87,15,81,11,"useEffect"],[87,24,81,11],[87,26,81,12],[87,32,81,18],[88,6,82,4],[88,12,82,10,"interval"],[88,20,82,18],[88,23,82,21,"setInterval"],[88,34,82,32],[88,35,82,33],[88,41,82,39],[89,8,83,6,"fetchRate"],[89,17,83,15],[89,18,83,16],[89,19,83,17],[90,6,84,4],[90,7,84,5],[90,9,84,7],[90,14,84,12],[90,15,84,13],[90,16,84,14],[90,17,84,15],[92,6,86,4],[92,13,86,11],[92,19,86,17,"clearInterval"],[92,32,86,30],[92,33,86,31,"interval"],[92,41,86,39],[92,42,86,40],[93,4,87,2],[93,5,87,3],[93,7,87,5],[93,8,87,6,"fetchRate"],[93,17,87,15],[93,18,87,16],[93,19,87,17],[94,4,89,2],[94,10,89,8,"refreshRate"],[94,21,89,19],[94,24,89,22],[94,28,89,22,"useCallback"],[94,34,89,33],[94,35,89,33,"useCallback"],[94,46,89,33],[94,48,89,34],[94,60,89,46],[95,6,90,4,"setLoading"],[95,16,90,14],[95,17,90,15],[95,21,90,19],[95,22,90,20],[96,6,91,4],[96,12,91,10,"fetchRate"],[96,21,91,19],[96,22,91,20],[96,23,91,21],[97,4,92,2],[97,5,92,3],[97,7,92,5],[97,8,92,6,"fetchRate"],[97,17,92,15],[97,18,92,16],[97,19,92,17],[98,4,94,2],[98,24,95,4],[98,28,95,4,"_reactJsxDevRuntime"],[98,47,95,4],[98,48,95,4,"jsxDEV"],[98,54,95,4],[98,56,95,5,"RateContext"],[98,67,95,16],[98,68,95,17,"Provider"],[98,76,95,25],[99,6,95,26,"value"],[99,11,95,31],[99,13,95,33],[100,8,95,35,"rates"],[100,13,95,40],[101,8,95,42,"loading"],[101,15,95,49],[102,8,95,51,"error"],[102,13,95,56],[103,8,95,58,"refreshRate"],[103,19,95,69],[104,8,95,71,"lastUpdate"],[105,6,95,82],[105,7,95,84],[106,6,95,84,"children"],[106,14,95,84],[106,16,96,7,"children"],[107,4,96,15],[108,6,96,15,"fileName"],[108,14,96,15],[108,16,96,15,"_jsxFileName"],[108,28,96,15],[109,6,96,15,"lineNumber"],[109,16,96,15],[110,6,96,15,"columnNumber"],[110,18,96,15],[111,4,96,15],[111,11,97,26],[111,12,97,27],[112,2,99,0],[112,3,99,1],[113,2,101,0],[113,6,101,0,"_default"],[113,14,101,0],[113,17,101,15,"RateContext"],[113,28,101,26],[114,0,101,27],[114,3]],"functionMap":{"names":["<global>","createContext$argument_0.refreshRate","useRate","RateProvider","fetchRate","useEffect$argument_0","setInterval$argument_0","<anonymous>","refreshRate"],"mappings":"AAA;eCiC,cD;uBEI,6BF;yDGM;gCCM;GDuB;YEG;GFE;YEG;iCCC;KDE;WEE,6BF;GFC;kCKE;GLG;CHO"},"hasCjsExports":false},"type":"js/module"}]}